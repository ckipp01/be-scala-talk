---
author: Chris Kipp - BE Scala 
date: MM-dd-YY
paging: "%d/%d"
---

# Interrelated protocols in the editing experience
## LSP, BSP, DAP, how's it all work together?


```
     â”Œâ”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚Editorâ”‚          â”‚Metalsâ”‚          â”‚Build Serverâ”‚
     â””â”€â”€â”¬â”€â”€â”€â”˜          â””â”€â”€â”¬â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
        â”‚       LSP       â”‚                    â”‚       
        â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚                    â”‚       
        â”‚                 â”‚                    â”‚       
        â”‚                 â”‚         BSP        â”‚       
        â”‚                 â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚     
        â”‚                 â”‚                    â”‚       
        â”‚                 â”‚DAP                 â”‚       
        â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚     
     â”Œâ”€â”€â”´â”€â”€â”€â”          â”Œâ”€â”€â”´â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
     â”‚Editorâ”‚          â”‚Metalsâ”‚          â”‚Build Serverâ”‚
     â””â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


---

# Hi, I'm Chris ğŸ‘‹

  - Software developer at **Lunatech**
  - I enjoy working in open-source Scala tooling
      - Metals (maintainer)
      - Scoverage (maintainer)
      - `nvim-metals` (author)
      - plus some other small things...
  - Host a pocast called [Tooling Talks](tooling-talks.com)
  - A big fan of Neovim

---

# IDEs (_Integrated Development Environment_)

_Everything all packaged together_
```
,---------------------IDE-----------------------.
|  ,-----------------.  ,-------------------.   |
|  |text manipulation|  |syntax highlighting|   |
|  |                 |  |                   |   |
|  `-----------------'  `-------------------'   |
|                                               |
|                                               |
|  ,----------------.   ,-----------------.     |
|  |language support|   |run/debug support|     |
|  |                |   |                 |     |
|  `----------------'   `-----------------'     |
|                                               |
`-----------------------------------------------'
```
## Examples
   - IntelliJ
   - Eclipse

---

# A protocol driven approach 

```
     â”Œâ”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚Editorâ”‚          â”‚Language Serverâ”‚          â”‚Build Serverâ”‚
     â””â”€â”€â”¬â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
        â”‚         LSP          â”‚                        â”‚       
        â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚       
        â”‚                      â”‚                        â”‚       
        â”‚                      â”‚          BSP           â”‚       
        â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚       
        â”‚                      â”‚                        â”‚       
        â”‚                      DAP                      â”‚      
        â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚    
     â”Œâ”€â”€â”´â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
     â”‚Editorâ”‚          â”‚Language Serverâ”‚          â”‚Build Serverâ”‚
     â””â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Examples
   - The Metals ecosystem

---

# Language Server Protocol

```
     â”Œâ”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚Editorâ”‚                   â”‚Language Serverâ”‚
     â””â”€â”€â”¬â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ LSP (Language Server Protocol)â”‚        
        â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚       
     â”Œâ”€â”€â”´â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
     â”‚Editorâ”‚                   â”‚Language Serverâ”‚
     â””â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Example

```
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”
     â”‚VS Codeâ”‚          â”‚Metalsâ”‚
     â””â”€â”€â”€â”¬â”€â”€â”€â”˜          â””â”€â”€â”¬â”€â”€â”€â”˜
         â”‚                 â”‚    
         â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚    
     â”Œâ”€â”€â”€â”´â”€â”€â”€â”          â”Œâ”€â”€â”´â”€â”€â”€â”
     â”‚VS Codeâ”‚          â”‚Metalsâ”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”˜
```


---
# Build Server Protocol

```
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚Language Serverâ”‚             â”‚Build Serverâ”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
             â”‚BSP (Build Server Protocol)â”‚       
             â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚      
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
     â”‚Language Serverâ”‚             â”‚Build Serverâ”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
## Example

```
     â”Œâ”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”
     â”‚Metalsâ”‚          â”‚Bloopâ”‚
     â””â”€â”€â”¬â”€â”€â”€â”˜          â””â”€â”€â”¬â”€â”€â”˜
        â”‚                 â”‚   
        â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚   
     â”Œâ”€â”€â”´â”€â”€â”€â”          â”Œâ”€â”€â”´â”€â”€â”
     â”‚Metalsâ”‚          â”‚Bloopâ”‚
     â””â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”˜
```

---

# Debug Adapter Protocol

_You'd assume_
```
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚DAP Clientâ”‚          â”‚Dap Serverâ”‚
     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
          â”‚                     â”‚      
          â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> â”‚    
     â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
     â”‚DAP Clientâ”‚          â”‚Dap Serverâ”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# Debug Adapter Protocol

_But in reality it's sort of more like_

```
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚Debug Clientâ”‚          â”‚Debug Adapterâ”‚          â”‚Debuggerâ”‚
     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
           â”‚                        â”‚                     â”‚     
           â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚     
           â”‚                        â”‚                     â”‚     
           â”‚                        â”‚                     â”‚     
           â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚     
     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”
     â”‚Debug Clientâ”‚          â”‚Debug Adapterâ”‚          â”‚Debuggerâ”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# Debug Adapter Protocol

_And yet even more tricky when you look at Metals_

```
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          
     â”‚nvim-metalsâ”‚          â”‚nvim-dapâ”‚          â”‚metalsâ”‚          â”‚build serverâ”‚          â”‚debug adapterâ”‚          â”‚debuggerâ”‚          
     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â””â”€â”€â”¬â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          
           â”‚                    â”‚                  â”‚                    â”‚                        â”‚                     â”‚               
           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                  â”‚                    â”‚                        â”‚                     â”‚               
           â”‚                    â”‚                  â”‚                    â”‚                        â”‚                     â”‚               
           â”‚                    â”‚                  â”‚                    â”‚                        â”‚                     â”‚               
           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                        â”‚                     â”‚               
           â”‚                    â”‚                  â”‚                    â”‚                        â”‚                     â”‚               
           â”‚                    â”‚                  â”‚                    â”‚                        â”‚                     â”‚               
           â”‚                    â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>                    â”‚                        â”‚                     â”‚               
           â”‚                    â”‚                  â”‚                    â”‚                        â”‚                     â”‚               
           â”‚                    â”‚                  â”‚                    â”‚                        â”‚                     â”‚               
           â”‚                    â”‚     â•”â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
           â”‚                    â”‚     â•‘ "MUCH OF THIS IS ALL WRAPPED TOGETHER"  â”‚                â”‚                     â”‚              â•‘
           â”‚                    â”‚     â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚                     â”‚              â•‘
           â”‚                    â”‚     â•‘            â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>                        â”‚                     â”‚              â•‘
           â”‚                    â”‚     â•‘            â”‚                    â”‚                        â”‚                     â”‚              â•‘
           â”‚                    â”‚     â•‘            â”‚                    â”‚                        â”‚                     â”‚              â•‘
           â”‚                    â”‚     â•‘            â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚              â•‘
           â”‚                    â”‚     â•‘            â”‚                    â”‚                        â”‚                     â”‚              â•‘
           â”‚                    â”‚     â•‘            â”‚                    â”‚                        â”‚                     â”‚              â•‘
           â”‚                    â”‚     â•‘            â”‚                    â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚              â•‘
           â”‚                    â”‚     â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”          â”Œâ”€â”€â”´â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”          
     â”‚nvim-metalsâ”‚          â”‚nvim-dapâ”‚          â”‚metalsâ”‚          â”‚build serverâ”‚          â”‚debug adapterâ”‚          â”‚debuggerâ”‚          
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜          
```

---

# You might be saying or asking...

> "Chris, why is there so many moving parts? This is so confusing"

Maybe, but *most* of it is abstracted away from the user

> "I'm amazed this even works at all"

Me too

> "Can you give an actual example to show all this"

Let's dive in
